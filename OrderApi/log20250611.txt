2025-06-11 13:15:00.200 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-06-11 13:15:00.338 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "OrderId" TEXT NOT NULL CONSTRAINT "PK_Orders" PRIMARY KEY,
    "CustomerName" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "Total" TEXT NOT NULL
);
2025-06-11 13:15:00.339 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OrderItems" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_OrderItems" PRIMARY KEY,
    "OrderId" TEXT NOT NULL,
    "ProductId" TEXT NOT NULL,
    "Quantity" INTEGER NOT NULL,
    CONSTRAINT "FK_OrderItems_Orders_OrderId" FOREIGN KEY ("OrderId") REFERENCES "Orders" ("OrderId") ON DELETE CASCADE
);
2025-06-11 13:15:00.339 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" ("OrderId", "CreatedAt", "CustomerName", "Total")
VALUES ('1A0D7171-30FC-4F94-B708-88BB4B21D5E2', '2025-06-11 05:14:59.9799882', 'Sample Customer', '0.0');
SELECT changes();
2025-06-11 13:15:00.339 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OrderItems" ("Id", "OrderId", "ProductId", "Quantity")
VALUES ('23FE1B94-2547-434A-8BDA-4E466A91DC8E', '1A0D7171-30FC-4F94-B708-88BB4B21D5E2', 'B122BD5F-BC5E-4D21-9F36-BB2E5B451F8F', 2);
SELECT changes();

INSERT INTO "OrderItems" ("Id", "OrderId", "ProductId", "Quantity")
VALUES ('C50EB893-2099-40A9-9F25-8343B9E508FB', '1A0D7171-30FC-4F94-B708-88BB4B21D5E2', '662DD6BF-2926-45CA-AA2D-F5A6B3944274', 1);
SELECT changes();
2025-06-11 13:15:00.339 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_OrderId" ON "OrderItems" ("OrderId");
2025-06-11 13:15:00.444 +08:00 [INF] Starting Orders API
2025-06-11 13:15:00.614 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/swagger - null null
2025-06-11 13:15:00.673 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-11 13:15:00.674 +08:00 [INF] Hosting environment: Development
2025-06-11 13:15:00.674 +08:00 [INF] Content root path: C:\Users\Administrator\source\repos\OrderApi\OrderApi
2025-06-11 13:15:01.948 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/swagger/index.html - null null
2025-06-11 13:15:01.956 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/swagger - 301 null null 1350.6028ms
2025-06-11 13:15:02.005 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/swagger/index.html - 200 null text/html;charset=utf-8 56.8946ms
2025-06-11 13:15:02.014 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/swagger/swagger-ui-bundle.js - null null
2025-06-11 13:15:02.014 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/swagger/swagger-ui-standalone-preset.js - null null
2025-06-11 13:15:02.017 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/_framework/aspnetcore-browser-refresh.js - null null
2025-06-11 13:15:02.017 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/swagger/swagger-ui.css - null null
2025-06-11 13:15:02.017 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/_vs/browserLink - null null
2025-06-11 13:15:02.059 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 8.1944ms
2025-06-11 13:15:02.083 +08:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-06-11 13:15:02.083 +08:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-06-11 13:15:02.084 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/swagger/swagger-ui.css - 200 152034 text/css 67.5077ms
2025-06-11 13:15:02.092 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 78.067ms
2025-06-11 13:15:02.115 +08:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-06-11 13:15:02.133 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 123.3955ms
2025-06-11 13:15:02.135 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/_vs/browserLink - 200 null text/javascript; charset=UTF-8 117.5734ms
2025-06-11 13:15:02.463 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/swagger/v1/swagger.json - null null
2025-06-11 13:15:02.473 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.5985ms
2025-06-11 13:15:02.480 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44366/swagger/favicon-32x32.png - null null
2025-06-11 13:15:02.481 +08:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-06-11 13:15:02.481 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44366/swagger/favicon-32x32.png - 200 628 image/png 0.8634ms
2025-06-11 13:15:18.396 +08:00 [INF] Request starting HTTP/2 POST https://localhost:44366/api/Orders - application/json 231
2025-06-11 13:15:18.402 +08:00 [INF] CORS policy execution successful.
2025-06-11 13:15:18.408 +08:00 [INF] Executing endpoint 'OrderApi.Controllers.OrdersController.CreateOrder (OrderApi)'
2025-06-11 13:15:18.429 +08:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderApi.Application.DTOs.CreateOrderRequest) on controller OrderApi.Controllers.OrdersController (OrderApi).
2025-06-11 13:15:18.536 +08:00 [INF] Creating order with ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-06-11 13:15:18.758 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o"
    WHERE "o"."OrderId" = @__orderId_0)
2025-06-11 13:15:18.860 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 2), @p3='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" ("OrderId", "CreatedAt", "CustomerName", "Total")
VALUES (@p0, @p1, @p2, @p3);
2025-06-11 13:15:18.863 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OrderItems" ("Id", "OrderId", "ProductId", "Quantity")
VALUES (@p0, @p1, @p2, @p3);
2025-06-11 13:15:18.871 +08:00 [INF] Successfully created order with ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-06-11 13:15:18.874 +08:00 [INF] Executing CreatedAtActionResult, writing value of type 'OrderApi.Application.DTOs.CreateOrderResponse'.
2025-06-11 13:15:18.891 +08:00 [INF] Executed action OrderApi.Controllers.OrdersController.CreateOrder (OrderApi) in 459.7486ms
2025-06-11 13:15:18.892 +08:00 [INF] Executed endpoint 'OrderApi.Controllers.OrdersController.CreateOrder (OrderApi)'
2025-06-11 13:15:18.894 +08:00 [INF] Request finished HTTP/2 POST https://localhost:44366/api/Orders - 201 null application/json; charset=utf-8 498.3468ms
2025-06-11 13:15:24.936 +08:00 [INF] Request starting HTTP/2 POST https://localhost:44366/api/Orders - application/json 231
2025-06-11 13:15:24.937 +08:00 [INF] CORS policy execution successful.
2025-06-11 13:15:24.937 +08:00 [INF] Executing endpoint 'OrderApi.Controllers.OrdersController.CreateOrder (OrderApi)'
2025-06-11 13:15:24.938 +08:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(OrderApi.Application.DTOs.CreateOrderRequest) on controller OrderApi.Controllers.OrdersController (OrderApi).
2025-06-11 13:15:24.940 +08:00 [INF] Creating order with ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-06-11 13:15:24.980 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Orders" AS "o"
    WHERE "o"."OrderId" = @__orderId_0)
2025-06-11 13:15:24.980 +08:00 [WRN] Order with ID "3fa85f64-5717-4562-b3fc-2c963f66afa6" already exists
2025-06-11 13:15:25.052 +08:00 [ERR] Error creating order with ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
System.InvalidOperationException: Order with ID 3fa85f64-5717-4562-b3fc-2c963f66afa6 already exists
   at OrderApi.Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request) in C:\Users\Administrator\source\repos\OrderApi\OrderApi\Application\Services\OrderService.cs:line 34
2025-06-11 13:15:25.114 +08:00 [WRN] Conflict creating order: Order with ID 3fa85f64-5717-4562-b3fc-2c963f66afa6 already exists
2025-06-11 13:15:25.115 +08:00 [INF] Executing ConflictObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-11 13:15:25.118 +08:00 [INF] Executed action OrderApi.Controllers.OrdersController.CreateOrder (OrderApi) in 180.5263ms
2025-06-11 13:15:25.118 +08:00 [INF] Executed endpoint 'OrderApi.Controllers.OrdersController.CreateOrder (OrderApi)'
2025-06-11 13:15:25.119 +08:00 [INF] Request finished HTTP/2 POST https://localhost:44366/api/Orders - 409 null application/json; charset=utf-8 182.6168ms
