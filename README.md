# Orders API

A clean, maintainable Orders API built with C#, .NET 8 Web API, and Entity Framework Core .

## Features

- RESTful API endpoint for creating orders
- Entity Framework Core with SQLite database
- Comprehensive error handling and logging with Serilog
- Dependency Injection throughout the application
- Asynchronous programming with async/await
- Unit tests for Controllers, Services, and Repositories
- Swagger/OpenAPI documentation
- AutoMapper for object mapping

## Project Structure

```
OrdersApi/
├── Controllers/              # API Controllers
│   └── OrdersController.cs
├── Application/             # Business Logic Layer
│   ├── DTOs/               # Data Transfer Objects
│   ├── Interfaces/         # Service & Repository Interfaces
│   ├── Services/           # Business Services
│   └── Mappings/          # AutoMapper Profiles
├── Domain/                  # Domain Layer
│   └── Entities/          # Domain Entities
├── Infrastructure/          # Data Access Layer
│   ├── Data/              # DbContext
│   └── Repositories/      # Repository Implementations
├── Program.cs              # Application Entry Point
├── appsettings.json       # Configuration
└── OrdersApi.csproj       # Project File

OrdersApi.Tests/            # Test Project
├── Unit/                   # Unit Tests
│   ├── Controllers/       # Controller tests
│   ├── Services/         # Service tests
│   └── Repositories/     # Repository tests
```

## Prerequisites

- .NET 8 SDK or later
- Any IDE (Visual Studio, VS Code, Rider)

## Setup Instructions

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd OrderApi
   ```

2. **Restore dependencies**
   ```bash
   dotnet restore
   ```

3. **Build the solution**
   ```bash
   dotnet build
   ```

4. **Run database migrations** (Optional - database is created automatically with Seed function)

## Running the API

1. **Navigate to the API project directory**
   ```bash
   cd OrderApi
   ```

2. **Run the application**
   ```bash
   dotnet run
   ```

3. **Access the API**
   - API Base URL: `http://localhost:5184` 
   - Swagger UI: `https://localhost:5184/swagger`

## Running Tests

1. **Run all tests**
   ```bash
   dotnet test
   ```

## API Endpoints

### Create Order
- **Endpoint**: `POST /api/orders`
- **Request Body**:
  ```json
  {
    "orderId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "customerName": "John Doe",
    "items": [
      {
        "productId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
        "quantity": 2
      }
    ],
    "createdAt": "2024-01-15T10:30:00Z"
  }
  ```
- **Success Response**: `201 Created`
  ```json
  {
    "orderId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "message": "Order created successfully"
  }
  ```
- **Error Responses**:
  - `400 Bad Request` - Invalid request data
  - `409 Conflict` - Order with same ID already exists
  - `500 Internal Server Error` - Unexpected error

## Assumptions

1. Order IDs are generated by the client (as specified in requirements)
2. No authentication/authorization required for this assignment
3. No validation on ProductIds (assume they exist in a separate product service)

## Troubleshooting

1. **Port already in use**: Change the port in `launchSettings.json`
2. **Database errors**: Delete `orders.db` file and restart the application
3. **Build errors**: Ensure you have .NET 8 SDK installed
